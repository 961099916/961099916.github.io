import{I as M,f as ae,J as te,K as U,L as se,P as le,M as re,l as Ee,g as S,i as F,N as ue,j as _,h as t,O as ie,R as T,Q as oe,S as ne,T as ce,U as ve,V as Be,W as he,n as Ae,X as pe,u as me,Y as de,Z as ye,$ as I,a0 as P,a1 as ge,a2 as R,a3 as De}from"./app-BDs7RLvG.js";const fe=["/","/java/01-Java%E5%9F%BA%E7%A1%80.html","/java/02-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html","/java/03-Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%B9%B6%E5%8F%91.html","/java/04-Java%20IO.html","/java/05-Java8.html","/java/06-JVM.html","/java/100-cglib.html","/java/101-string.html","/java/90-%E9%9D%A2%E8%AF%95%E9%A2%98.html","/java/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/01-Tomcat.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/02-XXL-JOB.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/03-Nacos.html","/%E5%AE%9E%E8%B7%B5/","/%E5%AE%9E%E8%B7%B5/%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/01-mysql.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/02-Redis.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/03-Elasticsearch.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/04-MongoDB.html","/%E6%9E%B6%E6%9E%84/","/%E6%A1%86%E6%9E%B6/mybatis.html","/%E6%A1%86%E6%9E%B6/spring-boot.html","/%E6%A1%86%E6%9E%B6/spring.html","/%E6%A1%86%E6%9E%B6/springcloud.html","/%E7%AE%97%E6%B3%95/01-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/%E7%AE%97%E6%B3%95/02-%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/03-%E5%B8%B8%E8%A7%81%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/04-%E9%A2%86%E5%9F%9F%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/05-%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3.html","/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3.html","/%E8%BF%90%E7%BB%B4/01-Docker.html","/%E8%BF%90%E7%BB%B4/02-Kubernetes.html","/%E8%BF%90%E7%BB%B4/03-Istio.html","/%E8%BF%90%E7%BB%B4/100-Linux.html","/%E9%80%9A%E7%94%A8/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/%E9%80%9A%E7%94%A8/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/404.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/%E6%95%B0%E6%8D%AE%E5%BA%93/","/%E6%A1%86%E6%9E%B6/","/%E7%AE%97%E6%B3%95/","/%E8%BF%90%E7%BB%B4/","/%E9%80%9A%E7%94%A8/","/category/","/category/%E8%82%A1%E7%A5%A8/","/category/%E9%A2%98%E6%9D%90%E5%A4%8D%E7%9B%98/","/tag/","/tag/%E7%82%92%E8%82%A1%E5%A4%8D%E7%9B%98/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA/","/tag/%E9%87%91%E8%9E%8D/","/tag/%E4%BD%8E%E7%A9%BA%E7%BB%8F%E6%B5%8E/","/article/","/star/","/timeline/"],He="SEARCH_PRO_QUERY_HISTORY",m=M(He,[]),Fe=()=>{const{queryHistoryCount:s}=R,l=s>0;return{enabled:l,queryHistory:m,addQueryHistory:r=>{l&&(m.value=Array.from(new Set([r,...m.value.slice(0,s-1)])))},removeQueryHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}},L=s=>fe[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,d=M(Re,[]),ke=()=>{const s=$>0;return{enabled:s,resultHistory:d,addResultHistory:l=>{if(s){const r={link:L(l),display:l.display};"header"in l&&(r.header=l.header),d.value=[r,...d.value.slice(0,$-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},Ce=s=>{const l=ve(),r=U(),k=Be(),u=S(0),D=F(()=>u.value>0),h=he([]);return Ae(()=>{const{search:A,terminate:C}=pe(),y=ge(n=>{const g=n.join(" "),{searchFilter:Q=B=>B,splitWord:w,suggestionsFilter:b,...p}=l.value;g?(u.value+=1,A(n.join(" "),r.value,p).then(B=>Q(B,g,r.value,k.value)).then(B=>{u.value-=1,h.value=B}).catch(B=>{console.warn(B),u.value-=1,u.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);_([s,r],([n])=>y(n),{immediate:!0}),me(()=>{C()})}),{isSearching:D,results:h}};var we=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const r=te(),k=U(),u=se(le),{enabled:D,addQueryHistory:h,queryHistory:A,removeQueryHistory:C}=Fe(),{enabled:y,resultHistory:n,addResultHistory:g,removeResultHistory:Q}=ke(),w=D||y,b=re(s,"queries"),{results:p,isSearching:B}=Ce(b),E=Ee({isQuery:!0,index:0}),c=S(0),v=S(0),O=F(()=>w&&(A.value.length>0||n.value.length>0)),j=F(()=>p.value.length>0),q=F(()=>p.value[c.value]||null),Y=()=>{const{isQuery:e,index:a}=E;a===0?(E.isQuery=!e,E.index=e?n.value.length-1:A.value.length-1):E.index=a-1},V=()=>{const{isQuery:e,index:a}=E;a===(e?A.value.length-1:n.value.length-1)?(E.isQuery=!e,E.index=0):E.index=a+1},X=()=>{c.value=c.value>0?c.value-1:p.value.length-1,v.value=q.value.contents.length-1},K=()=>{c.value=c.value<p.value.length-1?c.value+1:0,v.value=0},N=()=>{v.value<q.value.contents.length-1?v.value+=1:K()},W=()=>{v.value>0?v.value-=1:X()},x=e=>e.map(a=>De(a)?a:t(a[0],a[1])),Z=e=>{if(e.type==="customField"){const a=de[e.index]||"$content",[i,H=""]=ye(a)?a[k.value].split("$content"):a.split("$content");return e.display.map(o=>t("div",x([i,...o,H])))}return e.display.map(a=>t("div",x(a)))},f=()=>{c.value=0,v.value=0,l("updateQuery",""),l("close")},z=()=>D?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},u.value.queryHistory),A.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:E.isQuery&&E.index===a}],onClick:()=>{l("updateQuery",e)}},[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),C(a)}})]))])):null,G=()=>y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},u.value.resultHistory),n.value.map((e,a)=>t(T,{to:e.link,class:["search-pro-result-item",{active:!E.isQuery&&E.index===a}],onClick:()=>{f()}},()=>[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(i=>x(i)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),Q(a)}})]))])):null;return ue("keydown",e=>{if(s.isFocusing){if(j.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const a=q.value.contents[v.value];h(s.queries.join(" ")),g(a),r.push(L(a)),f()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const{index:a}=E;E.isQuery?(l("updateQuery",A.value[a]),e.preventDefault()):(r.push(n.value[a].link),f())}}}}),_([c,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!j.value:!O.value}],id:"search-pro-results"},s.queries.length?B.value?t(ie,{hint:u.value.searching}):j.value?t("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:a},i)=>{const H=c.value===i;return t("li",{class:["search-pro-result-list-item",{active:H}]},[t("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),a.map((o,ee)=>{const J=H&&v.value===ee;return t(T,{to:L(o),class:["search-pro-result-item",{active:J,"aria-selected":J}],onClick:()=>{h(s.queries.join(" ")),g(o),f()}},()=>[o.type==="text"?null:t(o.type==="title"?oe:o.type==="heading"?ne:ce,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",Z(o))])])})])})):u.value.emptyResult:w?O.value?[z(),G()]:u.value.emptyHistory:u.value.emptyResult)}});export{we as default};
