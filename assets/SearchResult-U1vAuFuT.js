import{I as M,f as te,J as ae,K as U,L as Ee,P as le,M as se,l as re,g as S,i as H,N as ue,j as _,h as a,O as ie,R as J,Q as Be,S as oe,T as ne,U as ce,V as ve,W as Ae,n as he,X as me,u as pe,Y as de,Z as ye,$ as T,a0 as P,a1 as ge,a2 as R,a3 as Fe}from"./app-CMVEEaeV.js";const De=["/","/java/01-Java%E5%9F%BA%E7%A1%80.html","/java/02-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html","/java/03-Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%B9%B6%E5%8F%91.html","/java/04-Java%20IO.html","/java/05-Java8.html","/java/06-JVM.html","/java/100-cglib.html","/java/101-string.html","/java/90-%E9%9D%A2%E8%AF%95%E9%A2%98.html","/java/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/01-Tomcat.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/02-XXL-JOB.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/03-Nacos.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/04-RocketMQ.html","/%E5%AE%9E%E8%B7%B5/01-%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA.html","/%E5%AE%9E%E8%B7%B5/","/%E5%AE%9E%E8%B7%B5/%E6%96%B0%E4%B9%8B%E7%A7%91%E6%8A%80%E4%BE%9B%E5%BA%94%E9%93%BE%E5%B9%B3%E5%8F%B0.html","/%E5%AE%9E%E8%B7%B5/%E6%96%B0%E5%86%8D%E7%94%9F%E4%BA%A4%E6%98%93%E5%B9%B3%E5%8F%B0.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/01-mysql.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/02-Redis.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/03-Elasticsearch.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/04-MongoDB.html","/%E6%9E%B6%E6%9E%84/","/%E6%9E%B6%E6%9E%84/%E7%BF%BB%E8%AF%91%EF%BC%9A%E6%9E%B6%E6%9E%84%E8%93%9D%E5%9B%BE%E2%80%94%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E7%9A%844_1%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7%EF%BC%89%20-%20%E7%9F%A5%E4%B9%8E.html","/%E6%A1%86%E6%9E%B6/01-mybatis.html","/%E6%A1%86%E6%9E%B6/02-spring.html","/%E6%A1%86%E6%9E%B6/03-spring-boot.html","/%E6%A1%86%E6%9E%B6/04-springcloud.html","/%E7%AE%97%E6%B3%95/01-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/%E7%AE%97%E6%B3%95/02-%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/03-%E5%B8%B8%E8%A7%81%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/04-%E9%A2%86%E5%9F%9F%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/05-%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3.html","/%E8%BF%90%E7%BB%B4/01-Docker.html","/%E8%BF%90%E7%BB%B4/02-Kubernetes.html","/%E8%BF%90%E7%BB%B4/03-Istio.html","/%E8%BF%90%E7%BB%B4/100-Linux.html","/%E8%BF%90%E7%BB%B4/101-Kubernetes%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85.html","/%E9%80%9A%E7%94%A8/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/%E9%80%9A%E7%94%A8/02-Unix%20IO%E6%A8%A1%E5%9E%8B.html","/%E9%80%9A%E7%94%A8/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20XV6.html","/404.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/%E6%95%B0%E6%8D%AE%E5%BA%93/","/%E6%A1%86%E6%9E%B6/","/%E7%AE%97%E6%B3%95/","/%E8%BF%90%E7%BB%B4/","/%E9%80%9A%E7%94%A8/","/category/","/category/%E8%82%A1%E7%A5%A8/","/category/%E9%A2%98%E6%9D%90%E5%A4%8D%E7%9B%98/","/tag/","/tag/%E7%82%92%E8%82%A1%E5%A4%8D%E7%9B%98/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA/","/tag/%E9%87%91%E8%9E%8D/","/tag/%E4%BD%8E%E7%A9%BA%E7%BB%8F%E6%B5%8E/","/article/","/star/","/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",p=M(fe,[]),He=()=>{const{queryHistoryCount:E}=R,l=E>0;return{enabled:l,queryHistory:p,addQueryHistory:s=>{l&&(p.value=Array.from(new Set([s,...p.value.slice(0,E-1)])))},removeQueryHistory:s=>{p.value=[...p.value.slice(0,s),...p.value.slice(s+1)]}}},b=E=>De[E.id]+("anchor"in E?`#${E.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,d=M(Re,[]),Ce=()=>{const E=$>0;return{enabled:E,resultHistory:d,addResultHistory:l=>{if(E){const s={link:b(l),display:l.display};"header"in l&&(s.header=l.header),d.value=[s,...d.value.slice(0,$-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},ke=E=>{const l=ce(),s=U(),C=ve(),u=S(0),F=H(()=>u.value>0),A=Ae([]);return he(()=>{const{search:h,terminate:k}=me(),y=ge(o=>{const g=o.join(" "),{searchFilter:Q=v=>v,splitWord:w,suggestionsFilter:L,...m}=l.value;g?(u.value+=1,h(o.join(" "),s.value,m).then(v=>Q(v,g,s.value,C.value)).then(v=>{u.value-=1,A.value=v}).catch(v=>{console.warn(v),u.value-=1,u.value||(A.value=[])})):A.value=[]},R.searchDelay-R.suggestDelay);_([E,s],([o])=>y(o),{immediate:!0}),pe(()=>{k()})}),{isSearching:F,results:A}};var we=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(E,{emit:l}){const s=ae(),C=U(),u=Ee(le),{enabled:F,addQueryHistory:A,queryHistory:h,removeQueryHistory:k}=He(),{enabled:y,resultHistory:o,addResultHistory:g,removeResultHistory:Q}=Ce(),w=F||y,L=se(E,"queries"),{results:m,isSearching:v}=ke(L),r=re({isQuery:!0,index:0}),n=S(0),c=S(0),O=H(()=>w&&(h.value.length>0||o.value.length>0)),x=H(()=>m.value.length>0),j=H(()=>m.value[n.value]||null),V=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?o.value.length-1:h.value.length-1):r.index=t-1},X=()=>{const{isQuery:e,index:t}=r;t===(e?h.value.length-1:o.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},Y=()=>{n.value=n.value>0?n.value-1:m.value.length-1,c.value=j.value.contents.length-1},K=()=>{n.value=n.value<m.value.length-1?n.value+1:0,c.value=0},N=()=>{c.value<j.value.contents.length-1?c.value+=1:K()},W=()=>{c.value>0?c.value-=1:Y()},q=e=>e.map(t=>Fe(t)?t:a(t[0],t[1])),Z=e=>{if(e.type==="customField"){const t=de[e.index]||"$content",[i,f=""]=ye(t)?t[C.value].split("$content"):t.split("$content");return e.display.map(B=>a("div",q([i,...B,f])))}return e.display.map(t=>a("div",q(t)))},D=()=>{n.value=0,c.value=0,l("updateQuery",""),l("close")},z=()=>F?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},u.value.queryHistory),h.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{l("updateQuery",e)}},[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),k(t)}})]))])):null,G=()=>y?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},u.value.resultHistory),o.value.map((e,t)=>a(J,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{D()}},()=>[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(i=>q(i)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),Q(t)}})]))])):null;return ue("keydown",e=>{if(E.isFocusing){if(x.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=j.value.contents[c.value];A(E.queries.join(" ")),g(t),s.push(b(t)),D()}}else if(y){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")X();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(l("updateQuery",h.value[t]),e.preventDefault()):(s.push(o.value[t].link),D())}}}}),_([n,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:E.queries.length?!x.value:!O.value}],id:"search-pro-results"},E.queries.length?v.value?a(ie,{hint:u.value.searching}):x.value?a("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},i)=>{const f=n.value===i;return a("li",{class:["search-pro-result-list-item",{active:f}]},[a("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),t.map((B,ee)=>{const I=f&&c.value===ee;return a(J,{to:b(B),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{A(E.queries.join(" ")),g(B),D()}},()=>[B.type==="text"?null:a(B.type==="title"?Be:B.type==="heading"?oe:ne,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[B.type==="text"&&B.header?a("div",{class:"content-header"},B.header):null,a("div",Z(B))])])})])})):u.value.emptyResult:w?O.value?[z(),G()]:u.value.emptyHistory:u.value.emptyResult)}});export{we as default};
