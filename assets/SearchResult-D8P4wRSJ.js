import{I as M,f as eE,J as tE,K as U,L as aE,P as sE,M as lE,l as BE,g as w,i as k,N as rE,j as _,h as t,O as iE,R as J,Q as uE,S as oE,T as AE,U as nE,V as cE,W as vE,n as hE,X as mE,u as pE,Y as dE,Z as yE,$ as T,a0 as P,a1 as DE,a2 as f,a3 as FE}from"./app-CCmE2rRq.js";const gE=["/","/java/","/%E5%AE%9E%E8%B7%B5/","/%E6%9E%B6%E6%9E%84/01-%E7%BF%BB%E8%AF%91%EF%BC%9A%E6%9E%B6%E6%9E%84%E8%93%9D%E5%9B%BE%E2%80%94%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E7%9A%844_1%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7%EF%BC%89%20-%20%E7%9F%A5%E4%B9%8E.html","/%E6%9E%B6%E6%9E%84/","/java/%E6%95%99%E7%A8%8B/01-Java%E5%9F%BA%E7%A1%80.html","/java/%E6%95%99%E7%A8%8B/02-Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html","/java/%E6%95%99%E7%A8%8B/03-Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%B9%B6%E5%8F%91.html","/java/%E6%95%99%E7%A8%8B/04-Java%20IO.html","/java/%E6%95%99%E7%A8%8B/05-Java8.html","/java/%E6%95%99%E7%A8%8B/06-JVM.html","/java/%E6%95%99%E7%A8%8B/100-cglib.html","/java/%E6%95%99%E7%A8%8B/101-string.html","/java/%E9%9D%A2%E8%AF%95/01-%E9%9D%A2%E8%AF%95%E9%A2%98.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/nacos/03-Nacos.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/04-RocketMQ.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/tomcat/01-Tomcat.html","/%E4%B8%AD%E9%97%B4%E4%BB%B6/xxl-job/02-XXL-JOB.html","/%E5%AE%9E%E8%B7%B5/%E5%B7%A5%E4%BD%9C/01-%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA.html","/%E5%AE%9E%E8%B7%B5/%E5%B7%A5%E4%BD%9C/02-%E6%96%B0%E5%86%8D%E7%94%9F%E4%BA%A4%E6%98%93%E5%B9%B3%E5%8F%B0.html","/%E5%AE%9E%E8%B7%B5/%E5%B7%A5%E4%BD%9C/03-%E6%96%B0%E4%B9%8B%E7%A7%91%E6%8A%80%E4%BE%9B%E5%BA%94%E9%93%BE%E5%B9%B3%E5%8F%B0.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch/03-Elasticsearch.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb/04-MongoDB.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/01-mysql.html","/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/02-Redis.html","/%E6%A1%86%E6%9E%B6/mybatis/01-mybatis.html","/%E6%A1%86%E6%9E%B6/spring/02-spring.html","/%E6%A1%86%E6%9E%B6/spring/03-spring-boot.html","/%E6%A1%86%E6%9E%B6/spring/04-springcloud.html","/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/02-%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/03-%E5%B8%B8%E8%A7%81%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95.html","/%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/01-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3/05-%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3.html","/%E7%AE%97%E6%B3%95/%E9%A2%86%E5%9F%9F%E7%AE%97%E6%B3%95/04-%E9%A2%86%E5%9F%9F%E7%AE%97%E6%B3%95.html","/%E8%BF%90%E7%BB%B4/docker/01-Docker.html","/%E8%BF%90%E7%BB%B4/istio/03-Istio.html","/%E8%BF%90%E7%BB%B4/kubernetes/02-Kubernetes.html","/%E8%BF%90%E7%BB%B4/kubernetes/101-Kubernetes%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85.html","/%E8%BF%90%E7%BB%B4/linux/100-Linux.html","/%E9%80%9A%E7%94%A8/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/02-Unix%20IO%E6%A8%A1%E5%9E%8B.html","/%E9%80%9A%E7%94%A8/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/03-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20XV6.html","/%E9%80%9A%E7%94%A8/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/404.html","/java/%E6%95%99%E7%A8%8B/","/java/%E9%9D%A2%E8%AF%95/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/nacos/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/tomcat/","/%E4%B8%AD%E9%97%B4%E4%BB%B6/xxl-job/","/%E5%AE%9E%E8%B7%B5/%E5%B7%A5%E4%BD%9C/","/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch/","/%E6%95%B0%E6%8D%AE%E5%BA%93/","/%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb/","/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/","/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/","/%E6%A1%86%E6%9E%B6/mybatis/","/%E6%A1%86%E6%9E%B6/","/%E6%A1%86%E6%9E%B6/spring/","/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/","/%E7%AE%97%E6%B3%95/","/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/","/%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3/","/%E7%AE%97%E6%B3%95/%E9%A2%86%E5%9F%9F%E7%AE%97%E6%B3%95/","/%E8%BF%90%E7%BB%B4/docker/","/%E8%BF%90%E7%BB%B4/","/%E8%BF%90%E7%BB%B4/istio/","/%E8%BF%90%E7%BB%B4/kubernetes/","/%E8%BF%90%E7%BB%B4/linux/","/%E9%80%9A%E7%94%A8/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/%E9%80%9A%E7%94%A8/","/%E9%80%9A%E7%94%A8/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/","/category/%E8%82%A1%E7%A5%A8/","/category/%E9%A2%98%E6%9D%90%E5%A4%8D%E7%9B%98/","/tag/","/tag/%E7%82%92%E8%82%A1%E5%A4%8D%E7%9B%98/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA/","/tag/%E9%87%91%E8%9E%8D/","/tag/%E4%BD%8E%E7%A9%BA%E7%BB%8F%E6%B5%8E/","/article/","/star/","/timeline/"],CE="SEARCH_PRO_QUERY_HISTORY",p=M(CE,[]),kE=()=>{const{queryHistoryCount:a}=f,s=a>0;return{enabled:s,queryHistory:p,addQueryHistory:l=>{s&&(p.value=Array.from(new Set([l,...p.value.slice(0,a-1)])))},removeQueryHistory:l=>{p.value=[...p.value.slice(0,l),...p.value.slice(l+1)]}}},S=a=>gE[a.id]+("anchor"in a?`#${a.anchor}`:""),fE="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=f,d=M(fE,[]),HE=()=>{const a=$>0;return{enabled:a,resultHistory:d,addResultHistory:s=>{if(a){const l={link:S(s),display:s.display};"header"in s&&(l.header=s.header),d.value=[l,...d.value.slice(0,$-1)]}},removeResultHistory:s=>{d.value=[...d.value.slice(0,s),...d.value.slice(s+1)]}}},RE=a=>{const s=nE(),l=U(),H=cE(),r=w(0),F=k(()=>r.value>0),v=vE([]);return hE(()=>{const{search:h,terminate:R}=mE(),y=DE(o=>{const D=o.join(" "),{searchFilter:b=c=>c,splitWord:x,suggestionsFilter:L,...m}=s.value;D?(r.value+=1,h(o.join(" "),l.value,m).then(c=>b(c,D,l.value,H.value)).then(c=>{r.value-=1,v.value=c}).catch(c=>{console.warn(c),r.value-=1,r.value||(v.value=[])})):v.value=[]},f.searchDelay-f.suggestDelay);_([a,l],([o])=>y(o),{immediate:!0}),pE(()=>{R()})}),{isSearching:F,results:v}};var xE=eE({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:s}){const l=tE(),H=U(),r=aE(sE),{enabled:F,addQueryHistory:v,queryHistory:h,removeQueryHistory:R}=kE(),{enabled:y,resultHistory:o,addResultHistory:D,removeResultHistory:b}=HE(),x=F||y,L=lE(a,"queries"),{results:m,isSearching:c}=RE(L),B=BE({isQuery:!0,index:0}),A=w(0),n=w(0),O=k(()=>x&&(h.value.length>0||o.value.length>0)),j=k(()=>m.value.length>0),q=k(()=>m.value[A.value]||null),V=()=>{const{isQuery:E,index:e}=B;e===0?(B.isQuery=!E,B.index=E?o.value.length-1:h.value.length-1):B.index=e-1},X=()=>{const{isQuery:E,index:e}=B;e===(E?h.value.length-1:o.value.length-1)?(B.isQuery=!E,B.index=0):B.index=e+1},Y=()=>{A.value=A.value>0?A.value-1:m.value.length-1,n.value=q.value.contents.length-1},K=()=>{A.value=A.value<m.value.length-1?A.value+1:0,n.value=0},N=()=>{n.value<q.value.contents.length-1?n.value+=1:K()},W=()=>{n.value>0?n.value-=1:Y()},Q=E=>E.map(e=>FE(e)?e:t(e[0],e[1])),Z=E=>{if(E.type==="customField"){const e=dE[E.index]||"$content",[i,C=""]=yE(e)?e[H.value].split("$content"):e.split("$content");return E.display.map(u=>t("div",Q([i,...u,C])))}return E.display.map(e=>t("div",Q(e)))},g=()=>{A.value=0,n.value=0,s("updateQuery",""),s("close")},z=()=>F?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},r.value.queryHistory),h.value.map((E,e)=>t("div",{class:["search-pro-result-item",{active:B.isQuery&&B.index===e}],onClick:()=>{s("updateQuery",E)}},[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},E),t("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),R(e)}})]))])):null,G=()=>y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},r.value.resultHistory),o.value.map((E,e)=>t(J,{to:E.link,class:["search-pro-result-item",{active:!B.isQuery&&B.index===e}],onClick:()=>{g()}},()=>[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[E.header?t("div",{class:"content-header"},E.header):null,t("div",E.display.map(i=>Q(i)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),b(e)}})]))])):null;return rE("keydown",E=>{if(a.isFocusing){if(j.value){if(E.key==="ArrowUp")W();else if(E.key==="ArrowDown")N();else if(E.key==="Enter"){const e=q.value.contents[n.value];v(a.queries.join(" ")),D(e),l.push(S(e)),g()}}else if(y){if(E.key==="ArrowUp")V();else if(E.key==="ArrowDown")X();else if(E.key==="Enter"){const{index:e}=B;B.isQuery?(s("updateQuery",h.value[e]),E.preventDefault()):(l.push(o.value[e].link),g())}}}}),_([A,n],()=>{var E;(E=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||E.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!j.value:!O.value}],id:"search-pro-results"},a.queries.length?c.value?t(iE,{hint:r.value.searching}):j.value?t("ul",{class:"search-pro-result-list"},m.value.map(({title:E,contents:e},i)=>{const C=A.value===i;return t("li",{class:["search-pro-result-list-item",{active:C}]},[t("div",{class:"search-pro-result-title"},E||r.value.defaultTitle),e.map((u,EE)=>{const I=C&&n.value===EE;return t(J,{to:S(u),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{v(a.queries.join(" ")),D(u),g()}},()=>[u.type==="text"?null:t(u.type==="title"?uE:u.type==="heading"?oE:AE,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?t("div",{class:"content-header"},u.header):null,t("div",Z(u))])])})])})):r.value.emptyResult:x?O.value?[z(),G()]:r.value.emptyHistory:r.value.emptyResult)}});export{xE as default};
